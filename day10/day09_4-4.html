<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í–„ë²„ê±°í•˜ìš°ìŠ¤ ê²Œì„</title>
    <style>
        #box {
            border: 5px solid plum;
            width: 300px;
            height: 300px;
            display: flex;
            flex-wrap: wrap;
        }

        .newBox {
            position: relative;
            display: block;
            box-sizing: border-box;
            width: 100px;
            height: 100px;
            border: 1px solid black;
            overflow: hidden;
        }

        .newBox ul {
            display: block;
            position: absolute;
            left: 0px;
            top: 0px;
            padding: 0;
            margin: 0;
        }

        .newBox ul li {
            border: 1px solid orange;
            width: 100px;
            height: 100px;
            list-style: none;
            text-align: center;
            line-height: 100px;
            box-sizing: border-box;
        }
    </style>
</head>

<body>
    <h1>í–„ë²„ê±°í•˜ìš°ìŠ¤ ê²Œì„</h1>
    <button id="startBtn">START</button>
    <button id="stopBtn">STOP</button>
    <hr>
    <div id="box"></div>
    <p id="result"></p>

    <script>
        // ìŠ¬ë¡¯ ì‹¬ë³¼ ì •ì˜
        const symbols = ["7ï¸âƒ£", "ğŸ‹", "ğŸŠ", "ğŸ‰", "â­", "ğŸ””", "ğŸ’", "ğŸ‡", "ğŸ“", "ğŸ"];

        // Box ìƒì„±ì í•¨ìˆ˜ ì •ì˜
        function Box() { }

        // Box í”„ë¡œí† íƒ€ì…ì„ HTMLDivElement í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ì„¤ì •
        Box.prototype = Object.create(HTMLDivElement.prototype);
        Box.prototype.constructor = Box;

        // Box ì´ˆê¸°í™” ë©”ì†Œë“œ
        Box.prototype.init = function () {
            this.newBox = document.createElement("div"); // ìƒˆë¡œìš´ div ìš”ì†Œ ìƒì„±
            this.elementUl = document.createElement("ul"); // ìƒˆë¡œìš´ ul ìš”ì†Œ ìƒì„±

            // ì‹¬ë³¼ì„ li ìš”ì†Œë¡œ ìƒì„±í•˜ì—¬ ulì— ì¶”ê°€
            for (let i = 0; i < symbols.length; i++) {
                this.elementLi = document.createElement("li");
                this.elementLi.innerText = symbols[i]; // li ìš”ì†Œì— ì‹¬ë³¼ í…ìŠ¤íŠ¸ ì¶”ê°€
                this.elementUl.appendChild(this.elementLi); // ul ìš”ì†Œì— li ì¶”ê°€
            }

            this.newBox.appendChild(this.elementUl); // Box ìš”ì†Œì— ul ì¶”ê°€
            this.newBox.setAttribute("class", "newBox"); // Box ìš”ì†Œì— í´ë˜ìŠ¤ ì„¤ì •
            return this.newBox;
        }

        // Box ì‹œì‘ ë©”ì†Œë“œ
        Box.prototype.start = function (speed) {
            this.elementUl.style.position = "absolute"; // ul ìš”ì†Œì˜ ìœ„ì¹˜ë¥¼ ì ˆëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì •
            this.elementUl.style.left = "0px";
            this.elementUl.style.top = "0px";
            this.y = 0; // y ì¢Œí‘œ ì´ˆê¸°í™”
            this.intervalRef = setInterval(() => {
                this.y -= 10; // y ì¢Œí‘œë¥¼ 10ì”© ê°ì†Œì‹œì¼œ ìœ„ë¡œ ì´ë™
                this.elementUl.style.top = this.y + "px"; // ul ìš”ì†Œì˜ top ìœ„ì¹˜ ì„¤ì •
                if (this.y <= -1000) { // ul ìš”ì†Œê°€ í•œ ë°”í€´ ë‹¤ ëŒë©´
                    this.y = 0; // y ì¢Œí‘œë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”
                }
            }, speed); // ì£¼ì–´ì§„ ì†ë„ë¡œ ë°˜ë³µ
        }

        // Box ë©ˆì¶¤ ë©”ì†Œë“œ
        Box.prototype.stop = function () {
            clearInterval(this.intervalRef); // setInterval ì¤‘ì§€
            let currentPos = Math.abs(this.y % 1000); // í˜„ì¬ y ì¢Œí‘œë¥¼ 1000 ë‹¨ìœ„ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€
            let stopPos = Math.floor(currentPos / 100) * 100; // 100 ë‹¨ìœ„ë¡œ ë‚´ë¦¼
            this.elementUl.style.top = -stopPos + "px"; // ul ìš”ì†Œì˜ top ìœ„ì¹˜ ì„¤ì •
            this.currentSymbol = symbols[stopPos / 100]; // ë©ˆì¶˜ ìœ„ì¹˜ì˜ ì‹¬ë³¼ ì €ì¥
        }

        const divBox = document.querySelector("#box"); // box ìš”ì†Œ ì„ íƒ

        // Box ê°ì²´ ë°°ì—´ ìƒì„±
        const boxArr = Array.from({ length: 9 }, () => new Box());

        // ê° Box ê°ì²´ë¥¼ ì´ˆê¸°í™”í•˜ê³  divBoxì— ì¶”ê°€
        for (let i = 0; i < boxArr.length; i++) {
            const newBox = boxArr[i].init();
            divBox.appendChild(newBox);
        }

        const startBtn = document.querySelector("#startBtn"); // ì‹œì‘ ë²„íŠ¼ ì„ íƒ
        // ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        startBtn.addEventListener('click', function () {
            boxArr.forEach(function (box) {
                box.start(Math.floor(5 + Math.random() * 20)); // ëœë¤ ì†ë„ë¡œ Box ì‹œì‘
            });
            document.getElementById("result").textContent = ""; // ê²°ê³¼ ë©”ì‹œì§€ ì´ˆê¸°í™”
        });

        const stopBtn = document.querySelector("#stopBtn"); // ë©ˆì¶¤ ë²„íŠ¼ ì„ íƒ
        // ë©ˆì¶¤ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        stopBtn.addEventListener('click', function () {
            boxArr.forEach(function (box) {
                box.stop(); // ëª¨ë“  Box ë©ˆì¶¤
            });
        });
    </script>
</body>

</html>
